{"version":3,"sources":["components/SelectCountry.js","App.js","serviceWorker.js","index.js"],"names":["SelectCountry","userId","parseInt","window","location","search","replace","compare","a","b","value","getCountries","func","wait","timeout","args","later","clearTimeout","setTimeout","debounce","fetch","then","response","json","data","filtered","filter","country","includes","searchInput","trim","toLowerCase","sort","setCountries","displayAllToggle","slice","setExtraCountriesCount","count","length","setCountryExistsInDb","bool","useState","countries","setSearchInput","extraCountriesCount","setDisplayAllToggle","countryExistsInDb","searchElementRef","useRef","isUserAdminRef","useEffect","filterUser","user","id","current","isAdmin","Fragment","ref","type","name","placeholder","onChange","e","target","map","key","onClick","focus","className","display","App","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"0QAGe,SAASA,IAEpB,IAAMC,EAAqE,IAA5DC,SAASC,OAAOC,SAASC,OAAOC,QAAvB,YAA4C,KAAWJ,SAASC,OAAOC,SAASC,OAAOC,QAAvB,YAA4C,KAAO,EAMrIC,EAAU,SAACC,EAAEC,GAAH,OAASD,EAAEE,MAAQD,EAAEC,MAAQ,GAAK,GAyB9CC,EAtBa,SAACC,EAAMC,GACpB,IAAIC,EAGJ,OAAO,WAAoC,IAAD,uBAANC,EAAM,yBAANA,EAAM,gBAGtC,IAAMC,EAAQ,WAEVF,EAAU,KAGVF,EAAI,WAAJ,EAAQG,IAGZE,aAAaH,GAGbA,EAAUI,WAAWF,EAAOH,IAIjBM,EAAS,WACxBC,MAAM,uBACLC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACF,IAAMC,EAAWD,EAAKE,QAAO,SAAAC,GAAO,OAAIA,EAAQjB,MAAMkB,SAASC,EAAYC,OAAOC,kBAAgBC,KAAKzB,GACpF0B,EAAnBC,EAAgCT,EAAyBA,EAASU,MAAM,EAjC7D,IAkCXC,GAAuB,SAAAC,GAAK,OAAYZ,EAASa,OAlCtC,KAmCXb,EAASa,OAAS,EAAIC,GAAqB,SAAAC,GAAI,OAAW,KAAQD,GAAqB,SAAAC,GAAI,OAAW,UAE3G,KA1CiC,EA6CFC,mBAAS,IA7CP,mBA6C7BC,EA7C6B,KA6ClBT,EA7CkB,OA8CEQ,mBAAS,IA9CX,mBA8C7BZ,EA9C6B,KA8ChBc,EA9CgB,OA+CkBF,mBAAS,GA/C3B,mBA+C7BG,EA/C6B,KA+CRR,EA/CQ,OAgDYK,oBAAS,GAhDrB,mBAgD7BP,EAhD6B,KAgDXW,EAhDW,OAiDcJ,oBAAS,GAjDvB,mBAiD7BK,EAjD6B,KAiDVP,EAjDU,KAoD9BQ,EAAmBC,mBACnBC,EAAiBD,mBAevB,OAZAE,oBAAUvC,EAAc,CAACkB,EAAaK,IAGtCgB,qBAAU,WACN9B,MAAM,mBACLC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACF,IAAM2B,EAAa3B,EAAKE,QAAO,SAAA0B,GAAI,OAAIA,EAAKC,KAAKpD,KACjDgD,EAAeK,QAAUH,EAAW,GAAGI,cAK3C,kBAAC,IAAMC,SAAP,KAEI,2BACIC,IAAKV,EACLW,KAAK,OACLC,KAAK,cACLjD,MAAOmB,EACP+B,YAAY,YACZC,SAAU,SAAAC,GAAC,OAAInB,EAAemB,EAAEC,OAAOrD,UAG1CuC,EAAeK,UAAYR,EAAoB,uCAAuB,KAGtEJ,EAAUsB,KAAI,SAAArC,GACX,OACI,4BACIsC,IAAG,kBAAatC,EAAQ0B,IACxBa,QAAS,SAAAJ,GAELnB,EAAemB,EAAEC,OAAOrD,OAExBqC,EAAiBO,QAAQa,SAE7BR,KAAMhC,EAAQ0B,GACd3C,MAAOiB,EAAQjB,MACf0D,UAAU,yBAETzC,EAAQ0C,YAIpBzB,GAAqB,EAAI,4BAAQsB,QAAS,kBAAMrB,GAAqBX,KAAoBA,EAAmB,UAAH,UAAkBU,EAAlB,aAA4D,KAGtK,2BAAIK,EAAeK,UAAYR,EAAoB,6DAA+D,OCpG/GwB,MAJf,WACI,OAAO,kBAACtE,EAAD,OCQSuE,QACW,cAA7BpE,OAAOC,SAASoE,UAEe,UAA7BrE,OAAOC,SAASoE,UAEhBrE,OAAOC,SAASoE,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB5D,MAAK,SAAA6D,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAME,c","file":"static/js/main.65cd7960.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport '../App.css';\n\nexport default function SelectCountry() {\n    // Select user (id=1: admin user, id=2: non-admin) based on query string parameters for simple test toggle purposes only\n    const userId = parseInt(window.location.search.replace(`?user-id=`, ''))===1 ? parseInt(window.location.search.replace(`?user-id=`, '')) : 2;\n\n    // Set max number of countries initially displayed in list\n    const maxDisplay = 4;\n\n    // Function to compare alphabetical order of countries from returned results\n    const compare = (a,b) => a.value > b.value ? 1 : -1;\n\n    // Debounce function\n    const debounce = (func, wait) => {\n        let timeout;\n    \n        // Function to be executed many times. Spread (...args) to capture any number of parameters.\n        return function executedFunction(...args) {\n    \n            // Callback function to be executed after debounce time has elapsed\n            const later = () => {\n                // null timeout to indicate the debounce ended\n                timeout = null;\n                \n                // Execute the callback\n                func(...args);\n            };\n            // Reset waiting every time function executed\n            clearTimeout(timeout);\n            \n            // Restart the debounce waiting period\n            timeout = setTimeout(later, wait);\n        };\n    };\n    \n    let getCountries = debounce(() => {\n        fetch('json/countries.json')\n        .then(response => response.json())\n        .then(data => {\n            const filtered = data.filter(country => country.value.includes(searchInput.trim().toLowerCase())).sort(compare);\n            displayAllToggle ? setCountries(filtered) : setCountries(filtered.slice(0, maxDisplay));\n            setExtraCountriesCount(count => count = filtered.length - maxDisplay);\n            filtered.length > 0 ? setCountryExistsInDb(bool => bool = true) : setCountryExistsInDb(bool => bool = false)\n        });\n    }, 300);\n\n    // useState variables and setters\n    const [countries, setCountries] = useState([]);\n    const [searchInput, setSearchInput] = useState('');\n    const [extraCountriesCount, setExtraCountriesCount] = useState(0);\n    const [displayAllToggle, setDisplayAllToggle] = useState(false);\n    const [countryExistsInDb, setCountryExistsInDb] = useState(true);\n\n    // useRef variables\n    const searchElementRef = useRef();\n    const isUserAdminRef = useRef();\n\n    // Get countries list from JSON to simulate database for test purposes only\n    useEffect(getCountries, [searchInput, displayAllToggle]);\n\n    // Check user's admin rights from JSON to simulate database for test purposes only\n    useEffect(() => {\n        fetch('json/users.json')\n        .then(response => response.json())\n        .then(data => {\n            const filterUser = data.filter(user => user.id===userId);\n            isUserAdminRef.current = filterUser[0].isAdmin;\n        });\n    });\n\n    return (\n        <React.Fragment>\n            {/* Search box */}\n            <input\n                ref={searchElementRef}\n                type=\"text\"\n                name=\"searchInput\"\n                value={searchInput}\n                placeholder=\"Search...\"\n                onChange={e => setSearchInput(e.target.value)}\n            />\n\n            {isUserAdminRef.current && !countryExistsInDb ? <button>Add</button> : null}\n\n            {/* Filtered search options */}\n            {countries.map(country => {\n                return (\n                    <option\n                        key={`country-${country.id}`}\n                        onClick={e => {\n                            // When country option is selected, populate search input text box with selected country\n                            setSearchInput(e.target.value);\n                            // Focus on search input text box\n                            searchElementRef.current.focus();\n                        }}\n                        name={country.id}\n                        value={country.value}\n                        className=\"select-country-option\"\n                    >\n                        {country.display}\n                    </option>\n                )\n            })}\n            {extraCountriesCount>=0 ? <button onClick={() => setDisplayAllToggle(!displayAllToggle)}>{displayAllToggle ? \"Hide...\" : `${extraCountriesCount} more...`}</button> : null}\n\n            {/* If user is admin and country does not exist in database, show message */}\n            <p>{isUserAdminRef.current && !countryExistsInDb ? \"Couldn't find a match, would you like to add this country?\" : null}</p>\n        </React.Fragment>\n    );\n}\n","import React from 'react';\nimport SelectCountry from \"./components/SelectCountry\"\n\nfunction App() {\n    return <SelectCountry />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}